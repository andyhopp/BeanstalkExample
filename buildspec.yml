version: 0.2

phases:
    install:
        commands:
        - dotnet tool install -g Microsoft.Web.LibraryManager.Cli
    build:
        commands:
        - mkdir -p build/publish
        - echo "Building with dotnet SDK Version $(dotnet --version)"
        - |
          pushd ASPNETExample.Core
          libman restore
          dotnet publish -c Release -o ../build/publish
          popd
        - echo "Build completed."
    # Prepare for CodeDeploy deployment
        - echo "Preparing deployment for '$TARGET_OS'..."
        - cp -r codedeploy/$TARGET_OS/* build/
artifacts:
    files: [ '**/*' ]
    name: PublishedBinaries
    base-directory: build
